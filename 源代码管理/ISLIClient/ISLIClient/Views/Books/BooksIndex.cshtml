@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>数据管理-查看</title>
    <link href="~/css/x-admin.css" rel="stylesheet" />
    <link href="~/css/pag.css" rel="stylesheet" />
    <script src="~/js/jquery-1.11.0.min.js"></script>
    <script src="~/Vue/vue.js"></script>
    <script src="~/Vue/axios.js"></script>
</head>
<body>
    <div class="x-nav"> <span class="layui-breadcrumb"> <a><cite>图书</cite></a> <a><cite>编码申请</cite></a> </span> <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" href="javascript:location.replace(location.href);" title="刷新"><i class="layui-icon" style="line-height:30px">ဂ</i></a> </div>
    <div class="x-body">
        <div id="app">
            <div class="tools">
                <ul class="toolbar">
                    <li><span><img src="~/images/t03.png" /></span>批量删除</li>
                    <li><span><img src="~/images/t09.png" /></span><a href="/Books/Apply">添加申请</a></li>
                    <li><input id="Text1" type="text" /></li>
                    <li><span><img src="~/images/t02.png" /></span><a href="javascript:;" v-on:click="check">查询</a></li>
                </ul>
            </div>
            <span class="x-right" style="line-height:25px">共有数据：{{count}} 条</span>
            <table class="tablelist">
                <thead>
                    <tr>
                        <th>
                            <input onclick="selectAll()" type="checkbox" name="controlAll" style="controlAll" id="controlAll">
                        </th>
                        <th>编号</th>
                        <th>书名</th>
                        <th>ISLI编码 </th>
                        <th>ISBN</th>
                        <th>中图分类法</th>
                        <th>过期时间</th>
                        <th>申请时间</th>
                        <th>状态</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody id="x-link">
                    <tr v-for="item in info" id="app">
                        <td><input type="checkbox" value="1" name="selected"></td>
                        <td id="id1">{{item.Id}}</td>
                        <td>{{item.BookName}}</td>
                        <td>--</td>
                        <td>{{item.ISBN}}</td>
                        <td>{{item.ChineseLibrary}}</td>
                        <td>{{item.OverDate}}</td>
                        <td>{{item.ApplyDate}}</td>
                        <td v-if="state ===1">已提交</td>
                        <td v-else="state ===2">正常使用</td>
                        <td v-else="state ===1">已提交</td>
                        <td v-else="state ===1">已提交</td>
                        <td v-if="state ===1">已提交</td>
                        <td class="td-manage">
                            <a title="编辑" href="javascript:;" onclick="data_management_look('查看', 'GeyById','','510')"
                               class="ml-5" style="text-decoration:none"><i class="layui-icon">&#xe642;</i></a> <a title="删除" href="javascript:;" onclick="data_management_del(this,'1')"
                                                                                                                   style="text-decoration:none"><i class="layui-icon">&#xe640;</i></a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="page" v-show="show">
            <div class="pagelist">
                <span class="jump">上一页</span> <span class="jump">1</span> <span class="jump">2</span> <span class="jump">3</span> <span class="ellipsis">...</span> <span class="jump">下一页</span> <span class="jumppoint">跳转到：</span> <span class="jumpinp">
                    <input type="text" id="pages">
                </span> <span class="jump gobtn"><a href="javascript:;" >GO</a></span>
            </div>
        </div>
    </div>
    <br />
    <br />
    <br />
    <script src="~/lib/layui/layui.js"></script>
    <script src="~/js/x-layui.js"></script>
    <script src="~/js/jquery2.js"></script>
    <script src="~/js/js.js"></script>
    <script>
        layui.use(['element', 'laypage', 'layer', 'form'], function () {
            $ = layui.jquery;//jquery
            lement = layui.element();//面包导航
            laypage = layui.laypage;//分页
            layer = layui.layer;//弹出层
            form = layui.form();//弹出层
        });
        // 编辑
        function data_management_look(title, url, w, h) {
            x_admin_show(title, url, w, h);
        }

    </script>
    <script type="text/javascript">
        $('.tablelist tbody tr:odd').addClass('odd');
    </script>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                info: null,
                state: 0,
                count: 0
            },
            mounted: function () {
                var that = this;
                axios({
                    method: "get",
                    url: "/Books/BooksList"
                }).then(function (res) {
                    that.info = res.data;
                    that.state = res.data[0].applyState;
                    that.count = res.data.length;
               })
            },
            methods: {
                check: function () {           
                    var that = this;
                    var parm = new URLSearchParams();
                    parm.append("str",$("#Text1").val());
                    axios({
                        method: "post",
                        url: '/Books/BookSearch/',
                        data: parm
                    }).then(function (res){
                        that.info = res.data;
                        that.count = res.data.length;
                    })
                }              
            }
        })
    </script>
</body>
</html>